#+TITLE: kchan's Emacs config

This org file is an index automatically generated from init.el.
Links in the file are clickable on GitHub and bring you to the
source code.  The more non-trivial parts of my config are marked
with ⭐, which I think some people may find interesting. Have
fun!

* Table of Contents :TOC:
- [[#erc][ERC]]
  - [[#package-erc][Package erc]]
- [[#email][Email]]
  - [[#package-notmuch][Package notmuch]]
- [[#input-method][Input Method]]
  - [[#package-pyim][Package pyim]]
- [[#-misc-handy-commands][⭐ Misc handy commands]]
- [[#-status-area][⭐ Status area]]
- [[#vampire-timezone][Vampire timezone]]
- [[#telegael][telega.el]]
  - [[#package-telega][Package telega]]
- [[#undo-tree][Undo Tree]]
  - [[#package-vundo][Package vundo]]
- [[#-org-index-generation][⭐ Org index generation]]
- [[#finale][Finale]]

* [[file:init.el#L3000][ERC]]

** Package [[file:init.el#L3002][erc]]
  - Function [[file:init.el#L3023][erc-insert-timestamp-right]]

* [[file:init.el#L3037][Email]]
  - Function [[file:init.el#L3054][insert-plist]], [[file:init.el#L3085][k-format-relative-date]]
  - Package [[file:init.el#L3102][message]]

** Package [[file:init.el#L3109][notmuch]]

 Custom email entry formatting
  - Function [[file:init.el#L3135][notmuch-search-show-result]]: Insert RESULT at POS.
  - Function [[file:init.el#L3169][k-ensure-davmail]]: Make sure davmail is running.
  - Function [[file:init.el#L3181][k-update-notmuch-unread-count]]
  - Function [[file:init.el#L3183][k-update-notmuch]]: Update email database asynchronously.
  - Function [[file:init.el#L3203][k-notmuch-unread-status]]
  - Package [[file:init.el#L3210][smtpmail]]

* [[file:init.el#L3220][Input Method]]

** Package [[file:init.el#L3222][pyim]]
  - Function [[file:init.el#L3227][k-pyim-probe]]
  - Package [[file:init.el#L3236][pyim-basedict]], [[file:init.el#L3238][pyim-greatdict]]

* [[file:init.el#L3243][⭐ Misc handy commands]]
  - Function [[file:init.el#L3247][lookup-word]]
  - Function [[file:init.el#L3255][demolish-package]]: Nuke everything under namespace SYMBOL.
    This is useful when maintaining a long running Emacs image and
    you want to try reloading/updating a package.

 https://gist.github.com/jdtsmith/1fbcacfe677d74bbe510aec80ac0050c
  - Function [[file:init.el#L3273][k-reraise-error]]: Call function FUNC with ARGS and re-raise any error which occurs.
    Useful for debugging post-command hooks and filter functions, which
    normally have their errors suppressed.
  - Function [[file:init.el#L3281][toggle-debug-on-hidden-errors]]: Toggle hidden error debugging for function FUNC.
  - Function [[file:init.el#L3292][k-straight-freeze-versions]]: Run `straight-freeze-versions' asynchronously in Emacs subprocess.

* [[file:init.el#L3302][⭐ Status area]]

 A status area at the right bottom corner (using the right side of global echo area).  It is used for displaying battery, time, and vampire time zone.
  - Function [[file:init.el#L3310][k-time-status]]: Status function for current time.
  - Function [[file:init.el#L3314][k-battery-status]]: Status function for battery status.
  - Function [[file:init.el#L3337][k-status-update]]: Update status area.

* [[file:init.el#L3360][Vampire timezone]]
 How much sun-protection-free time left?
  - Function [[file:init.el#L3368][time-to-vampire-time]]
  - Function [[file:init.el#L3380][vampire-time-status]]: Status function for vampire time zone.

* [[file:init.el#L3399][telega.el]]
 A heavily modified telega.el to tweak its appearance to my liking.

** Package [[file:init.el#L3406][telega]]
  - Function [[file:init.el#L3414][k-telega-chatbuf-attach-sticker]]
  - Advice [[file:init.el#L3445][telega-chars-xheight]], [[file:init.el#L3450][telega-sticker--create-image]], [[file:init.el#L3459][telega--fmt-text-faces]], [[file:init.el#L3465][telega-ins--special]], [[file:init.el#L3472][telega-ins--message0]], [[file:init.el#L3479][telega-ins--date]]
  - Function [[file:init.el#L3482][k-telega-load-all-history]]: Load all history in current chat.
  - Package [[file:init.el#L3517][enwc]], [[file:init.el#L3522][proced]]

* [[file:init.el#L3535][Undo Tree]]
  - Package [[file:init.el#L3537][undo-tree]]

** Package [[file:init.el#L3552][vundo]]
 Let vundo use k-echo-area
  - Function [[file:init.el#L3559][vundo]]: Display visual undo for the current buffer.
  - Function [[file:init.el#L3578][k-vundo-kill-buffer-advice]]: Let vundo use `k-echo-area-clear-1' instead of `kill-buffer-and-window'.
    The latter would also delete the main window because it is atomic
    with k-echo-area.

 `jit-lock-mode' need to be passed nil to turn off
  - Package [[file:init.el#L3608][undo-fu-session]]

* [[file:init.el#L3611][⭐ Org index generation]]
  - Package [[file:init.el#L3613][toc-org]]
  - Function [[file:init.el#L3615][k-generate-org-index]]: Read Emacs Lisp from current buffer and write org index to OUTPUT-BUFFER.
    SOURCE-FILENAME is used for generate relative link with line numbers.
    Processing starts from the point in current buffer and write to the point
    in OUTPUT-BUFFER. Both points are advanced during processing.
  - Function [[file:init.el#L3769][k-generate-org-index-init]]: Generate README.org from init.el.
  - Function [[file:init.el#L3795][k-generate-org-index--magit-post-stage-hook]]

* [[file:init.el#L3803][Finale]]

 load up the theme

 perform GC
